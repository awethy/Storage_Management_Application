@page
@model Storage_Management_Application.Pages.ReceiptPageModel
@{
    ViewData["Title"] = "Поступления";
}


    <h2 class="text-center mb-4">Поступления</h2>

<a asp-page="/CreatePages/CreateReceiptPage" class="btn btn-primary mb-3">Добавить поступление</a>

    <div id="activeReceiptsSection">
        <table class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>Номер</th>
                    <th>Дата</th>
                    <th>Ресурс</th>
                    <th>Ед. изм.</th>
                    <th>Количество</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Receipts != null && Model.Receipts.Any())
                {
                    foreach (var receipt in Model.Receipts)
                    {
                        var resources = receipt.ReceiptResources;
                        var resourceCount = resources.Count;

                        for (int i = 0; i < resourceCount; i++)
                        {
                            <tr class="selectable-row">
                                @if (i == 0)
                                {
                                    <td rowspan="@resourceCount">@receipt.Number</td>
                                    <td rowspan="@resourceCount">@receipt.Date.ToShortDateString()</td>
                                }
                                <td>@resources[i].Resource.Name</td>
                                <td>@resources[i].UnitsOM.Name</td>
                                <td>@resources[i].Quantity</td>
                            </tr>
                        }
                    }
                }
                else
                {
                    <tr>
                        <td colspan="5" class="text-center">Нет данных</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

